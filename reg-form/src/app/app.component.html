<div class="container">
  <div>
  <h1>{{title}}</h1>
  </div>
  <div [hidden]="!submitted" class="panel-body" *ngFor="let user of users">
    <p>Thank you for registerting with us {{user.firstname}}. We just sent you a confirmation email at {{user.email}}, and we will send all mail to {{user.streetAdd}}, {{user.city}}, {{user.state}}.</p>
    <p>Have a wonderful day!</p>
    <button class="btn btn-info" (click)="submitted=false">Edit</button>
  </div>

<div [hidden]="submitted" class="panel panel-default">
  <div class="panel-header jumbotron">
      <h3>Account Information</h3>
  </div>
  <div class="panel-body">
    <form style="padding: .5em" class="form-horizontal" #userForm="ngForm" (submit)="onSubmit(); userForm.reset()">
      <div class="form-group">
          <label for="firstname">First Name: </label>
          <input class="form-control" type="text" name="firstname" required minlength='4' maxlength="24" [(ngModel)]="user.firstname" #firstname="ngModel"/>
          <p *ngIf="firstname.dirty && firstname.errors" style="color: red">First name needs to be at least 4 characters long</p>
          <p *ngIf="firstname.invalid && (firstname.dirty || firstname.touched)" style="color: red">First name is required</p>
      </div>
      <div class="form-group">
          <label for="lastname">Last Name: </label>
          <input class="form-control" type="text" name="lastname" required minlength='2' maxlength="24" [(ngModel)]="user.lastname" #lastname="ngModel"/>
          <p *ngIf="lastname.dirty && lastname.errors" style="color: red">Last name needs to be at least 4 characters long</p>
          <p *ngIf="lastname.invalid && (lastname.dirty || lastname.touched)" style="color: red">Last name is required</p>
      </div>
      <div class="form-group">
          <label for="email">Email: </label>
          <input class="form-control" type="email" name="email" required minlength='4' maxlength="24" pattern='(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))' [(ngModel)]="user.email" #email="ngModel"/>
          <p *ngIf="email.dirty && email.errors" style="color: red">Email must be in proper format</p>
          <p *ngIf="email.invalid && (email.dirty || email.touched)" style="color: red">Email is required</p>
      </div>
      <div class="form-group">
          <label for="password">Password: </label>
          <input class="form-control" id="password" type="password" name="password" required minlength='8' [(ngModel)]="user.password" #password="ngModel"/>
          <p *ngIf="password.dirty && password.errors" style="color: red">Password must be 8 characters long</p>
          <p *ngIf="password.invalid && (password.dirty || password.touched)" style="color: red">Password is required</p>
      </div>
      <div class="form-group">
          <label for="confPassword">Confim Password: </label>
          <input class="form-control" id="confPassword" type="password" name="confPassword" required pw-check="password" minlength='8' [(ngModel)]="user.confPassword" #confPassword="ngModel"/>
          <p *ngIf="confPassword.invalid && (confPassword.dirty || confPassword.touched)" style="color:red">Passwords must match</p>
      </div>
      <div class="form-group">
          <label for="streetAdd">Street Address: </label>
          <input class="form-control" type="text" name="streetAdd" required [(ngModel)]="user.streetAdd" #streetAdd="ngModel"/>
          <p *ngIf="streetAdd.invalid && (streetAdd.dirty || streetAdd.touched)" style="color: red">Street address is required</p>
      </div>
      <div class="form-group">
          <label for="unit">Unit: </label>
          <input class="form-control" type="text" name="unit" [(ngModel)]="user.unit" #unit="ngModel"/>
      </div>
      <div class="form-group">
          <label for="city">City: </label>
          <input class="form-control" type="text" name="city" required minlength="2" [(ngModel)]="user.city" #city="ngModel"/>
          <p *ngIf="city.dirty && city.errors" style="color: red">City must be at least 2 characters</p>
          <p *ngIf="city.invalid && (city.dirty || city.touched)" style="color: red">City is required</p>
      </div>
      <div class="form-group">
        <label for="state">State: </label>
        <select class="form-control" name="state" required [(ngModel)]="user.state" #state="ngModel">
          <option value="AL">Alabama</option>
				  <option value="AK">Alaska</option>
				  <option value="AZ">Arizona</option>
				  <option value="AR">Arkansas</option>
  				<option value="CA">California</option>
  				<option value="CO">Colorado</option>
  				<option value="CT">Connecticut</option>
  				<option value="DE">Delaware</option>
  				<option value="DC">District Of Columbia</option>
  				<option value="FL">Florida</option>
  				<option value="GA">Georgia</option>
  				<option value="HI">Hawaii</option>
  				<option value="ID">Idaho</option>
  				<option value="IL">Illinois</option>
  				<option value="IN">Indiana</option>
  				<option value="IA">Iowa</option>
  				<option value="KS">Kansas</option>
  				<option value="KY">Kentucky</option>
  				<option value="LA">Louisiana</option>
  				<option value="ME">Maine</option>
  				<option value="MD">Maryland</option>
  				<option value="MA">Massachusetts</option>
  				<option value="MI">Michigan</option>
  				<option value="MN">Minnesota</option>
  				<option value="MS">Mississippi</option>
  				<option value="MO">Missouri</option>
  				<option value="MT">Montana</option>
  				<option value="NE">Nebraska</option>
  				<option value="NV">Nevada</option>
  				<option value="NH">New Hampshire</option>
  				<option value="NJ">New Jersey</option>
  				<option value="NM">New Mexico</option>
  				<option value="NY">New York</option>
  				<option value="NC">North Carolina</option>
  				<option value="ND">North Dakota</option>
  				<option value="OH">Ohio</option>
  				<option value="OK">Oklahoma</option>
  				<option value="OR">Oregon</option>
  				<option value="PA">Pennsylvania</option>
  				<option value="RI">Rhode Island</option>
  				<option value="SC">South Carolina</option>
  				<option value="SD">South Dakota</option>
  				<option value="TN">Tennessee</option>
  				<option value="TX">Texas</option>
  				<option value="UT">Utah</option>
  				<option value="VT">Vermont</option>
  				<option value="VA">Virginia</option>
  				<option value="WA">Washington</option>
  				<option value="WV">West Virginia</option>
  				<option value="WI">Wisconsin</option>
  				<option value="WY">Wyoming</option>
        </select>
        <p *ngIf="state.invalid && (state.dirty || state.touched)" style="color:red">State is required</p>
      </div>
      <div class="form-group">
        <label for="lucky">I'm feeling lucky:</label>
          <label class="radio-inline">
            <input class="form-control" type="radio" name="lucky" required [(ngModel)]="user.lucky" #lucky="ngModel" value="yes">Yes</label>
          <label class="radio-inline">
            <input class="form-control" type="radio" name="lucky" required [(ngModel)]="user.lucky" #lucky="ngModel" value="no">No</label>
          <p *ngIf="lucky.invalid && lucky.touched" style="color: red">Must choose a mood</p>
      </div>
      <button class='btn btn-default btn-block' type="submit" [disabled]="!userForm.valid">Register</button>
    </form>
  </div>
</div>
